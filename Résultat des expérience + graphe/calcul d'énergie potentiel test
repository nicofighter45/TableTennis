import matplotlib.pyplot as plt
import numpy as np
from data_reception import *
from processing import *
from speed import *
import sys
sys.path.insert(0, 'TableTennis/Interpolation_de_point')
import TEST_d_interpolation as it
Taille_pix, h,x = data("TableTennis/Résultat des expérience + graphe/Rebond table.txt")
def courbe(h):
    rebilitation_de_liste(h)
    h=premièrevaleurhaute(h)
    convertisseur(h,Taille_pix/100)
    interpolation_de_h = it.approximation(h,4)
    vitesse = it.der(interpolation_de_h)
    t=[k*10e-3 for k in range(100*(len(h)-4))]
    h = [interpolation_de_h(2*3+k) for k in t ]
    v = [vitesse(2*3+k) for k in t ]
    cinetique = energie_cinétique2(v)
    potentiel = energie_potentielle(h)
    potentiel = np.array(potentiel)
    cinetique = np.array(cinetique)
    print(v)
    Mecanique= potentiel + cinetique
    t = np.array(t)
    plt.plot(t,potentiel,label ="Énergie potentiel")
    plt.plot(t,cinetique,label ="Énergie cinétique")
    plt.plot(t,Mecanique,label="Énergie mécanique")
    plt.title("Évolution de l'énergie au cours du temps")
    plt.ylabel( "Énergie en Joule")
    plt.xlabel( "Temps en seconde")
    plt.legend()
    plt.show()
    plt.clf()
it.plot_vitesse_et_point(h,3)
courbe(h)